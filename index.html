<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dark POS PRO</title>

<style>
:root{
--bg:#0b0b0b;
--card:#161616;
--accent:#2979ff;
--success:#2ecc71;
--danger:#e74c3c;
--text:#f2f2f2;
--muted:#888;
}

*{box-sizing:border-box;font-family:system-ui}
body{margin:0;background:var(--bg);color:var(--text)}

.hidden{display:none}
.center{display:flex;align-items:center;justify-content:center;height:100vh}

.card{
background:var(--card);
padding:20px;
border-radius:14px;
box-shadow:0 0 30px rgba(0,0,0,.7)
}

input,button{
width:100%;
padding:14px;
margin:6px 0;
border-radius:10px;
border:none;
background:#222;
color:#fff;
font-size:16px
}

button{
background:var(--accent);
font-weight:600
}

button.danger{background:var(--danger)}
button.success{background:var(--success)}

nav{
position:fixed;
bottom:0;
width:100%;
display:flex;
background:#111;
border-top:1px solid #222
}

nav button{
flex:1;
border-radius:0;
background:#111;
color:#aaa
}

nav button.active{
background:var(--accent);
color:#fff
}

.section{padding:15px 15px 90px}
.product{
background:#1c1c1c;
padding:15px;
border-radius:12px;
margin-bottom:10px
}

.modal{
position:fixed;
inset:0;
background:rgba(0,0,0,.8);
display:flex;
align-items:center;
justify-content:center
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login" class="center">
<div class="card" style="width:320px">
<h2> Logowanie</h2>
<input type="password" id="loginPass" placeholder="Haso">
<button onclick="login()">Zaloguj</button>
</div>
</div>

<!-- OPEN CASH -->
<div id="cashOpen" class="center hidden">
<div class="card" style="width:320px">
<h2> Otwarcie kasy</h2>
<input type="number" id="cashStart" placeholder="Stan pocztkowy">
<button class="success" onclick="openCash()">Otw贸rz kas</button>
</div>
</div>

<!-- APP -->
<div id="app" class="hidden">

<div id="sale" class="section"></div>
<div id="orders" class="section hidden"></div>
<div id="stock" class="section hidden"></div>
<div id="settings" class="section hidden"></div>

<nav>
<button class="active" onclick="show('sale')">Ь Sprzeda偶</button>
<button onclick="show('orders')"> Zam贸wienia</button>
<button onclick="show('stock')"> Magazyn</button>
<button onclick="show('settings')">锔 Ustawienia</button>
</nav>

</div>

<!-- MODAL -->
<div id="modal" class="modal hidden"></div>

<script>
const PIN="1312"
let state=JSON.parse(localStorage.getItem("pos"))||{
cash:false,
products:[
{id:1,name:"Produkt A",price:10,stock:5},
{id:2,name:"Produkt B",price:20,stock:0}
],
cart:[],
orders:[]
}

function save(){localStorage.setItem("pos",JSON.stringify(state))}

function login(){
if(document.getElementById("loginPass").value===PIN){
loginDiv.classList.add("hidden")
cashOpen.classList.remove("hidden")
}else alert("Ze haso")
}

function openCash(){
state.cash=true
save()
cashOpen.classList.add("hidden")
app.classList.remove("hidden")
renderSale()
}

function show(id){
document.querySelectorAll(".section").forEach(s=>s.classList.add("hidden"))
document.getElementById(id).classList.remove("hidden")
document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"))
event.target.classList.add("active")
if(id==="sale")renderSale()
if(id==="orders")renderOrders()
if(id==="stock")renderStock()
}

function renderSale(){
sale.innerHTML="<h2>Sprzeda偶</h2>"
state.products.forEach(p=>{
sale.innerHTML+=`
<div class="product">
<b>${p.name}</b><br>
${p.price} z | Stan: ${p.stock}
<button onclick="add(${p.id})">Dodaj</button>
</div>`
})
sale.innerHTML+=`<button onclick="pay()">Zapa</button>
<button onclick="order()">Zam贸wienie</button>`
}

function add(id){
let p=state.products.find(x=>x.id===id)
if(p.stock<=0){
let pin=prompt("Brak stanu. PIN?")
if(pin!==PIN)return
}
state.cart.push(p)
save()
}

function pay(){
let total=state.cart.reduce((s,p)=>s+p.price,0)
let paid=prompt("Do zapaty "+total+" z\nKlient da:")
let change=paid-total
state.cart.forEach(p=>{if(p.stock>0)p.stock--})
state.cart=[]
save()
modal.innerHTML=`
<div class="card">
<h3>Sprzeda偶</h3>
Zapacono: ${paid} z<br>
Reszta: ${change} z
<button onclick="closeModal()">OK</button>
</div>`
modal.classList.remove("hidden")
}

function order(){
let paid=confirm("Zapacone teraz?")
state.orders.push({items:[...state.cart],paid})
state.cart=[]
save()
alert("Zam贸wienie zapisane")
}

function renderOrders(){
orders.innerHTML="<h2>Zam贸wienia</h2>"
state.orders.forEach(o=>{
orders.innerHTML+=`
<div class="product">
Zam贸wienie | ${o.paid?"Opacone":"Przy odbiorze"}
</div>`
})
}

function renderStock(){
stock.innerHTML="<h2>Magazyn</h2>"
state.products.forEach(p=>{
stock.innerHTML+=`<div class="product">${p.name}: ${p.stock}</div>`
})
}

function closeModal(){
modal.classList.add("hidden")
}

const loginDiv=document.getElementById("login")
const cashOpen=document.getElementById("cashOpen")
const app=document.getElementById("app")
const modal=document.getElementById("modal")

</script>
</body>
</html>
